var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ManageIndexPage=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.assemblies=[],t}return __extends(t,n),t.prototype.Ready=function(){n.prototype.Ready.call(this);this.listTemplate=Handlebars.compile($("#list-template").html());this.modalTemplate=Handlebars.compile($("#modal-template").html());this.form=$("#mform");var t=this.form.serializeArray();this.SetAssemblyMenu()},t.prototype.ResetAssemblyList=function(){var n=this;Base.Helpers.AjaxService("GET",this.options.urlReset,null,function(){toastr.success("Assembly List Reseted");n.SetAssemblyMenu()})},t.prototype.SetAssemblyMenu=function(){var n=this;Base.Helpers.AjaxService("GET",this.options.urlFiles,null,function(t){t&&t.length>0?($("#dlist").html(n.listTemplate(t)),$(".dllChoice").click(function(i){var r=$(i.currentTarget).attr("id"),u=t.filter(function(n){return n.Id===r});n.SetAndOpenDeleteModal(u[0])})):toastr.error("No files","There is no file to parse : Please upload one or more in Admin page")})},t.prototype.SetAndOpenDeleteModal=function(n){var t=this;$("#modal-content").html(this.modalTemplate(n));$("#deleteButton").click(function(i){var r=$(i.currentTarget).attr("data-id");Base.Helpers.AjaxService("GET",t.options.urlFiles,{id:r,deleted:!0},function(i){i?(toastr.success("Assembly deleted","Assembly "+n.Fullname+" successfuly deleted"),t.SetAssemblyMenu()):toastr.error("Assembly deleted error","Impossible to delete this assembly")}).always(function(){$("#assModal").modal("hide")})});$("#assModal").modal()},t}(Base.Page);